#set($method = $context.getMethod())
#set($cdnprefix = $!{mediaarchive.getCatalogSettingValue("cdn_prefix")})

#if(!$cdnprefix )
	#set($cdnprefix = $context.siteRoot )
#end
#if($method == "POST")
{
  "response":
      {
      #if($data.id)
      	#set($distributionid= $data.id)
        "id":"$distributionid",
        "status" : "ok"
        #else
        "status" :"error"
      #end
      }
 	#if($distributionid)
	  ,
	  #set($assetid = $data.assetid)
	  "assetid":"$assetid",
	  ##"data":#json($data $searcher.getPropertyDetails()),
	  
	  #set($asset = $mediaarchive.getAsset($assetid) )
	  #set($presets = $mediaarchive.asListOfPreviewLinks($asset))
	  "presets": [
	    #foreach( $preset in $presets )#if( ${foreach.count} != 1 ), #end
		  {	
			"name":#jesc($preset.name),	
			"id":#jesc($preset.id),	
			#if( $preset.getId() == "0")
			   "url": "$cdnprefix$home/$mediadbappid/services/distribution/published/$distributionid"
			#else
				"url": "$cdnprefix$home/$mediadbappid/services/distribution/published/$distributionid/$preset.id"
			#end	
		  }
	    #end
	  ]
	  
	#end
  
}
#else
  {
  	"error":"Invalid request"
  }
#end