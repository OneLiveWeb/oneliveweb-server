{
	"response":
		{
		    "status":#if($hits.isEmpty())"empty"#elseif($hits)"ok"#else"missinghits"#end
		    #if( $hits )
		    ,"totalhits" : $hits.size(),
			"searchtype" : "$searcher.getSearchType()",
			"hitsperpage": $hits.getHitsPerPage(),			
			"page": $hits.getPage(),
			"pages": $hits.totalPages,
			"hitssessionid": "$hits.getSessionId()",
			"query":
			{
				"friendly":#jesc($hits.getSearchQuery().toFriendly()),
				"terms":[
					#foreach( $term in $hits.getSearchQuery().getTerms() )#if( ${foreach.count} != 1 ), #end
					 { "id":"$term.getId()","operation":#jesc($term.getOperation())
					 	#if( $term.getValue() ),"value":#jesc($term.getValue())#end
					 	#if($term.getValues())
					 		,"values": [
					 			#foreach( $val in $term.getValues() )#if( ${foreach.count} != 1 ), #end
					 				#jesc($val)
					 			#end
					 		]
					 	#end		
					 }
					#end
				]	
			}
			#end
		}
	#if( $hits )
	 ,"results":[
		#foreach($hit in $hits.getPageOfHits())#if( ${foreach.count} != 1 ), #end
		$hit.toJsonString()
		#end
		]		
 	 , "generated":[
		#foreach($hit in $hits.getPageOfHits())#if( ${foreach.count} != 1 ), #end
		{ "id":"$hit.getId()", "sourcepath":#jesc($hit.sourcepath), "files":
		[ #foreach($item in $mediaarchive.listGeneratedFiles($hit) )#if( ${foreach.count} != 1 ), #end
			{"filename": #jesc($item.getName()), "lastmodified" : #jesc($item.getLastModified() )} 
		  #end
		]}
		#end
  	]
    #end		
}