#set( $clientroot = "/${applicationid}/components/timeline" )
<div class="timelinedatacontainer">
<div id="timelinemetadata"
	class="timelinedata" 
	data-ratio="$timeline.getPxToTimeRatio()" 
	data-savelink="$home$clientroot/saveclips.json" 
	data-assetid="$asset.id" 
	style="margin:0; width:1200px;">
	#set( $clips = $timeline.loadClips($asset,"clips") )
	#foreach($clip in $clips)
		#set( $index = ${foreach.count} - 1)
		<div id="slider$index" 
			class="ts-data-selection"  
			data-cliplabel="#esc($clip.getLabel())"
			data-timecodestart="$clip.getStart()"
			data-timecodelength="$clip.getLength()"
			#set( $other = $clip.getOtherDetails() )
			#foreach($fieldid in $other.keySet())
				#set( $v = $other.get($fieldid))
				data-${fieldid}="$v" 
			#end
			>
			##<div class="ruler" >
				<div class="timecell" style="left: ${timeline.getPxStart($clip)}px; width: ${timeline.getPxLength($clip)}px; top: ${timeline.getPxVertical($clip)}px;">
					<a href="#" title="[[Move Tag]]" class="grabmove"><i class="fas fa-arrows-alt"></i></a>
					<div class="grabresize"></div>
					<span class="cliptext">  #esc($!clip.getValue("cliplabel"))</span>
					#if( $other.size() > 1)
					<span class="clipdetails"> 
					#foreach($fieldid in $other.keySet())	
						#set( $v = false )
						#set( $v = $other.get($fieldid) )
						#if( $v )
							#if( $fieldid == "verticaloffset")
								##skip
							#elseif( $fieldid == "keywords")
								<span class="clipdetail"><a href="$apphome/views/modules/modulesearch/index.html?description.value=$v&operation=freeform&field=description" target="_blank" class="entity-dialog">$v</a></span>
							#elseif( $v)
								#set( $list = $v.split("\|"))
								#foreach($row in $list)
									#set( $val = false )
									#set( $val = $mediaarchive.getCachedData($fieldid,$row) )
									#if( $val)
										<span class="clipdetail"><a href="$apphome/components/gridsample/preview/entity.html?id=$val.getId()&searchtype=$fieldid" class="emdialog entity-dialog">$val</a></span>
									#else
									##Missing: $fieldid = $v
									#end
								#end
							#end	 
						#end	
					#end
					</span>
					#end
				</div>
			##</div>
		</div>
		
		

		
		
	#end
</div>
</div>
<div id="templateclip" class="ts-data-selection" style="height: 45px;display:none;"
	data-cliplabel='[[New Clip]]' 
	data-timecodestart="0"
	data-timecodelength="10">
	##<div class="ruler" >
		<div class="timecell" style="cursor: move;position:relative;">
			<div class="grabresize"></div>
			<span class="cliptext">[[New Clip]]</span>
		</div>
	##</div>
</div>	